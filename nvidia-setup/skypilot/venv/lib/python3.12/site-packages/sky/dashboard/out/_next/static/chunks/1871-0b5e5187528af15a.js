"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1871],{39037:function(e,s,r){r.r(s),r.d(s,{ClusterTable:function(){return P},Clusters:function(){return O},Status2Actions:function(){return Z},enabledActions:function(){return W},handleVSCodeConnection:function(){return q}});var t=r(85893),a=r(67294),l=r(11163),n=r(55739),i=r(470),o=r(41664),c=r.n(o),d=r(30803),u=r(37673),h=r(68764),p=r(23266),x=r(17324),m=r(94545),f=r(13626),j=r(60998);/**
 * @license lucide-react v0.407.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,j.Z)("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),g=(0,j.Z)("SquareCode",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);r(9353);var w=r(92128),b=r(99307),v=r(23001),k=r(55988),N=r(23800),C=r(62935),S=r(6378),L=r(36856);r(1272);var M=r(20546),H=r(10546);let E=[{label:"Status",value:"status"},{label:"Cluster",value:"cluster"},{label:"User",value:"user"},{label:"Workspace",value:"workspace"},{label:"Infra",value:"infra"},{label:"Labels",value:"labels"}],R=(e,s)=>{let r="",t="";return e>=0&&(r=e+"m",t=" "),s&&(r+="".concat(t,"(down)")),""===r&&(r="-"),r},I=(e,s)=>{if(e&&e.includes("@")){let r=e.split("@")[0];return s&&s!==r?"".concat(r," (").concat(s,")"):r}let r=e||s||"N/A";return s&&s!==r?"".concat(r," (").concat(s,")"):r},_=e=>{if(!e||0===e)return"-";let s=e=Math.floor(e),r="",t=0;for(let e of[{value:31536e3,label:"y"},{value:2592e3,label:"mo"},{value:86400,label:"d"},{value:3600,label:"h"},{value:60,label:"m"},{value:1,label:"s"}])if(s>=e.value&&t<2){let a=Math.floor(s/e.value);r+="".concat(a).concat(e.label," "),s%=e.value,t++}return r.trim()||"0s"};function O(){let e=(0,l.useRouter)(),[s,r]=(0,a.useState)(!1),o=a.useRef(null),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),[g,b]=(0,a.useState)(()=>!!e.isReady&&"true"===e.query.history),[k,N]=(0,a.useState)(!0),[M,H]=(0,a.useState)(()=>{if(e.isReady){let s=e.query.historyDays;if(s&&"string"==typeof s&&["1","5","10","30"].includes(s))return parseInt(s)}return 1}),R=(0,v.X)(),[_,O]=(0,a.useState)([]),[q,K]=(0,a.useState)({status:[],cluster:[],user:[],workspace:[],infra:[],labels:[]}),[W,D]=(0,a.useState)(!1),[Z,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(e.isReady){T();let s="true"===e.query.history;g!==s&&(N(!1),b(s),setTimeout(()=>N(!0),50));let r=e.query.historyDays;if(r&&"string"==typeof r&&["1","5","10","30"].includes(r)){let e=parseInt(r);M!==e&&H(e)}}},[e.isReady,e.query.history,e.query.historyDays]),(0,a.useEffect)(()=>{(async()=>{try{await L.ZP.preloadForPage("clusters");let e=await S.ZP.get(x.getWorkspaces),s=Object.keys(e),r=await S.ZP.get(p.getClusters),t=[...new Set(r.map(e=>e.workspace||"default").filter(e=>e))],a=new Set(s);t.includes("default")&&a.has("default"),t.forEach(e=>a.add(e));let l=[...new Set(r.map(e=>({userId:e.user_hash||e.user,username:e.user})).filter(e=>e.userId)).values()],n=new Map;l.forEach(e=>{n.set(e.userId,{userId:e.userId,username:e.username,display:I(e.username,e.userId)})}),D(!0),A(new Date)}catch(e){console.error("Error fetching data for filters:",e),D(!0),A(new Date)}})()},[]);let z=s=>{let r={...e.query},t=[],a=[],l=[];s.map((e,s)=>{var r;t.push(null!==(r=e.property.toLowerCase())&&void 0!==r?r:""),a.push(e.operator),l.push(e.value)}),r.property=t,r.operator=a,r.value=l,e.replace({pathname:e.pathname,query:r},void 0,{shallow:!0})},U=s=>{let r={...e.query};r.history=s.toString(),e.replace({pathname:e.pathname,query:r},void 0,{shallow:!0})},B=s=>{let r={...e.query};r.historyDays=s.toString(),e.replace({pathname:e.pathname,query:r},void 0,{shallow:!0})},T=()=>{let s={...e.query},r=s.property,t=s.operator,a=s.value;if(void 0===r)return;let l=[],n=Array.isArray(r)?r.length:1,i=new Map;if(i.set("",""),i.set("status","Status"),i.set("cluster","Cluster"),i.set("user","User"),i.set("workspace","Workspace"),i.set("infra","Infra"),1===n)l.push({property:i.get(r),operator:t,value:a});else for(let e=0;e<n;e++)l.push({property:i.get(r[e]),operator:t[e],value:a[e]});O(l)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-1 min-h-[20px]",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(c(),{href:"/clusters",className:"text-sky-blue hover:underline leading-none text-base",children:"Sky Clusters"})}),(0,t.jsx)("div",{className:"w-full sm:w-auto",children:(0,t.jsx)(F,{propertyList:E,valueList:q,setFilters:O,updateURLParams:z,placeholder:"Filter clusters",filters:_})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:g,onChange:e=>{let s=e.target.checked;b(s),U(s)},className:"sr-only"}),(0,t.jsx)("div",{className:"relative inline-flex h-5 w-9 items-center rounded-full ".concat(k?"transition-colors":""," ").concat(g?"bg-sky-600":"bg-gray-300"),children:(0,t.jsx)("span",{className:"inline-block h-3 w-3 transform rounded-full bg-white ".concat(k?"transition-transform":""," ").concat(g?"translate-x-5":"translate-x-1")})}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Show history"})]}),g&&(0,t.jsxs)(C.Ph,{value:M.toString(),onValueChange:e=>{let s=parseInt(e);H(s),B(s)},children:[(0,t.jsx)(C.i4,{className:"w-24 h-8 text-xs",children:(0,t.jsx)(C.ki,{})}),(0,t.jsxs)(C.Bw,{children:[(0,t.jsx)(C.Ql,{value:"1",children:"1 day"}),(0,t.jsx)(C.Ql,{value:"5",children:"5 days"}),(0,t.jsx)(C.Ql,{value:"10",children:"10 days"}),(0,t.jsx)(C.Ql,{value:"30",children:"30 days"})]})]})]}),s&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(n.Z,{size:15,className:"mt-0"}),(0,t.jsx)("span",{className:"ml-2 text-gray-500 text-sm",children:"Loading..."})]}),!s&&Z&&(0,t.jsx)(i.$3,{timestamp:Z}),(0,t.jsxs)("button",{onClick:()=>{S.ZP.invalidate(p.getClusters),S.ZP.invalidate(x.getWorkspaces),g&&S.ZP.invalidate(p.uR),D(!1),L.ZP.preloadForPage("clusters",{force:!0}).then(()=>{D(!0),A(new Date),o.current&&o.current()})},disabled:s,className:"text-sky-blue hover:text-sky-blue-bright flex items-center",children:[(0,t.jsx)(f.Z,{className:"h-4 w-4 mr-1.5"}),!R&&(0,t.jsx)("span",{children:"Refresh"})]})]})]}),(0,t.jsx)(V,{filters:_,setFilters:O,updateURLParams:z}),(0,t.jsx)(P,{refreshInterval:i.yc,setLoading:r,refreshDataRef:o,filters:_,showHistory:g,historyDays:M,onOpenSSHModal:e=>{y(e),u(!0)},onOpenVSCodeModal:e=>{y(e),m(!0)},setOptionValues:K,preloadingComplete:W}),(0,t.jsx)(w.Oh,{isOpen:d,onClose:()=>u(!1),cluster:j}),(0,t.jsx)(w._R,{isOpen:h,onClose:()=>m(!1),cluster:j})]})}function P(e){let{refreshInterval:s,setLoading:r,refreshDataRef:l,filters:o,showHistory:x,historyDays:f,onOpenSSHModal:j,onOpenVSCodeModal:y,setOptionValues:g,preloadingComplete:w}=e,[v,C]=(0,a.useState)({key:null,direction:"ascending"}),{data:S,allData:L,total:E,page:I,limit:O,totalPages:P,hasNext:q,hasPrev:K,setPage:W,setLimit:D,loading:F,refresh:V,isServerPagination:A}=(0,p.r7)({showHistory:x,historyDays:f,refreshInterval:w?s:null,sortConfig:v,filters:o}),[z,U]=(0,a.useState)(!0);(0,a.useEffect)(()=>{!F&&z&&U(!1)},[F,z]),(0,a.useEffect)(()=>{r(F)},[F,r]);let B=e=>{let s={status:[],cluster:[],user:[],workspace:[],infra:[],labels:[]},r=(e,s)=>{e.includes(s)||e.push(s)};return e.map(e=>{r(s.status,e.status),r(s.cluster,e.cluster),r(s.user,e.user),r(s.workspace,e.workspace),r(s.infra,e.full_infra||e.infra);let t=e.labels||{};t&&"object"==typeof t&&Object.entries(t).forEach(e=>{let[t,a]=e;t&&a&&r(s.labels,"".concat(t,":").concat(a))})}),s};(0,a.useEffect)(()=>{L&&L.length>0&&g(B(L))},[L,g]);let T=a.useMemo(()=>{let e=A?S:L;if(!A){let e=(L||[]).filter(e=>e.isHistorical).length;console.log("[ClusterTable] Client-side - allData length:",(L||[]).length,", historical:",e,", filters:",o.length)}let s=A?e:0===o.length?e:e.filter(e=>{let s=null;for(let r=0;r<o.length;r++){let t=o[r],a=(0,H.mu)(e,t);s=null===s?a:s&&a}return s});return(0,m.R0)(s,v.key,v.direction)},[S,L,v,o,A]);a.useEffect(()=>{l&&(l.current=V)},[l,V]);let Q=e=>{let s="ascending";v.key===e&&"ascending"===v.direction&&(s="descending"),C({key:e,direction:s})},X=e=>v.key===e?"ascending"===v.direction?" ↑":" ↓":"",$=A?E:T.length,G=A?P||Math.ceil(E/O)||1:Math.ceil(T.length/O)||1,J=(I-1)*O,Y=J+O,ee=A?T:T.slice(J,Y),es=[{id:"status",order:0,header:{label:"Status",sortKey:"status",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("status"),children:["Status",X("status")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:(0,t.jsx)(k.j,{name:"clusters.table.status.badge",context:e,fallback:(0,t.jsx)(b.OE,{status:e.status,statusTooltip:e.statusTooltip})})})},{id:"cluster",order:1,header:{label:"Cluster",sortKey:"cluster",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("cluster"),children:["Cluster",X("cluster")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:(0,t.jsx)(c(),{href:"/clusters/".concat(e.isHistorical?e.cluster_hash:e.cluster||e.name),className:"text-blue-600",children:e.cluster||e.name})})},{id:"user",order:2,header:{label:"User",sortKey:"user",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("user"),children:["User",X("user")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:(0,t.jsx)(M.H,{username:e.user,userHash:e.user_hash})})},{id:"workspace",order:3,header:{label:"Workspace",sortKey:"workspace",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("workspace"),children:["Workspace",X("workspace")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:(0,t.jsx)(c(),{href:"/workspaces",className:"text-gray-700 hover:text-blue-600 hover:underline",children:e.workspace||"default"})})},{id:"infra",order:4,header:{label:"Infra",sortKey:"infra",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("infra"),children:["Infra",X("infra")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:(0,t.jsx)(i.Md,{content:e.full_infra||e.infra,className:"text-sm text-muted-foreground",children:(0,t.jsxs)("span",{children:[(0,t.jsx)(c(),{href:"/infra",className:"text-blue-600 hover:underline",children:e.cloud}),e.infra.includes("(")&&(0,t.jsx)("span",{children:" "+e.infra.substring(e.infra.indexOf("("))})]})})})},{id:"resources",order:5,header:{label:"Resources",sortKey:"resources_str",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("resources_str"),children:["Resources",X("resources_str")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:(0,t.jsx)(i.Md,{content:e.resources_str_full||e.resources_str,className:"text-sm text-muted-foreground",children:(0,t.jsx)("span",{children:e.resources_str})})})},{id:"started",order:6,header:{label:"Started",sortKey:"time",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("time"),children:["Started",X("time")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:(0,t.jsx)(i.Zg,{date:e.time})})},{id:"duration",order:7,conditional:!0,header:{label:"Duration",sortKey:"duration",className:"sortable whitespace-nowrap"},renderHeader:()=>x?(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("duration"),children:["Duration",X("duration")]}):null,renderCell:e=>x?(0,t.jsx)(h.pj,{children:_(e.duration)}):null},{id:"autostop",order:8,header:{label:"Autostop",sortKey:"autostop",className:"sortable whitespace-nowrap"},renderHeader:()=>(0,t.jsxs)(h.ss,{className:"sortable whitespace-nowrap",onClick:()=>Q("autostop"),children:["Autostop",X("autostop")]}),renderCell:e=>(0,t.jsx)(h.pj,{children:e.isHistorical?"-":R(e.autostop,e.to_down)})},{id:"actions",order:9,header:{label:"Actions",className:"md:sticky md:right-0 md:bg-white"},renderHeader:()=>(0,t.jsx)(h.ss,{className:"md:sticky md:right-0 md:bg-white",children:"Actions"}),renderCell:e=>(0,t.jsx)(h.pj,{className:"text-left md:sticky md:right-0 md:bg-white",children:!e.isHistorical&&(0,t.jsx)(Z,{cluster:e.cluster,status:e.status,onOpenSSHModal:j,onOpenVSCodeModal:y})})},...(0,N._q)("clusters",{showHistory:x}).map(e=>({id:e.id,order:e.header.order,isPlugin:!0,pluginColumn:e,renderHeader:()=>{let s=e.header.sortKey?"sortable whitespace-nowrap":"whitespace-nowrap",r="".concat(s).concat(e.header.className?" "+e.header.className:"");return(0,t.jsxs)(h.ss,{className:r,onClick:e.header.sortKey?()=>Q(e.header.sortKey):void 0,children:[e.header.label,e.header.sortKey?X(e.header.sortKey):""]})},renderCell:s=>{let r=e.cell.render(s,{item:s,showHistory:x,historyDays:f});return(0,t.jsx)(h.pj,{className:e.cell.className||"",children:r})}}))].sort((e,s)=>e.order-s.order).filter(e=>!e.conditional||e.conditional&&x),er=es.length;return(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Zb,{children:(0,t.jsx)("div",{className:"overflow-x-auto rounded-lg",children:(0,t.jsxs)(h.iA,{className:"min-w-full",children:[(0,t.jsx)(h.xD,{children:(0,t.jsx)(h.SC,{children:es.map(e=>a.cloneElement(e.renderHeader(),{key:e.id}))})}),(0,t.jsx)(h.RM,{children:F||!w?(0,t.jsx)(h.SC,{children:(0,t.jsx)(h.pj,{colSpan:er,className:"text-center py-6 text-gray-500",children:(0,t.jsxs)("div",{className:"flex justify-center items-center",children:[(0,t.jsx)(n.Z,{size:20,className:"mr-2"}),(0,t.jsx)("span",{children:"Loading..."})]})})}):ee.length>0?ee.map((e,s)=>(0,t.jsx)(h.SC,{children:es.map(s=>a.cloneElement(s.renderCell(e),{key:s.id}))},s)):(0,t.jsx)(h.SC,{children:(0,t.jsx)(h.pj,{colSpan:er,className:"text-center py-6 text-gray-500",children:x?"No clusters found":"No active clusters"})})})]})})}),$>0&&(0,t.jsx)("div",{className:"flex justify-end items-center py-2 px-4 text-sm text-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"mr-2",children:"Rows per page:"}),(0,t.jsxs)("div",{className:"relative inline-block",children:[(0,t.jsxs)("select",{value:O,onChange:e=>{D(parseInt(e.target.value,10))},className:"py-1 pl-2 pr-6 appearance-none outline-none cursor-pointer border-none bg-transparent",style:{minWidth:"40px"},children:[(0,t.jsx)("option",{value:10,children:"10"}),(0,t.jsx)("option",{value:30,children:"30"}),(0,t.jsx)("option",{value:50,children:"50"}),(0,t.jsx)("option",{value:100,children:"100"}),(0,t.jsx)("option",{value:200,children:"200"})]}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-500 absolute right-0 top-1/2 transform -translate-y-1/2 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),(0,t.jsx)("div",{children:"".concat(J+1," - ").concat(Math.min(Y,$)," of ").concat($)}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>{A?K&&W(I-1):W(Math.max(I-1,1))},disabled:A?!K:1===I,className:"text-gray-500 h-8 w-8 p-0",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"chevron-left",children:(0,t.jsx)("path",{d:"M15 18l-6-6 6-6"})})}),(0,t.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>{A?q&&W(I+1):W(Math.min(I+1,G))},disabled:A?!q:I===G||0===G,className:"text-gray-500 h-8 w-8 p-0",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"chevron-right",children:(0,t.jsx)("path",{d:"M9 18l6-6-6-6"})})})]})]})})]})}let q=(e,s)=>{s&&s(e)},K=(e,s)=>{s?s(e):window.open("ssh://".concat(e))},W=e=>"RUNNING"===e?["connect","VSCode"]:[],D={connect:(0,t.jsx)(y,{className:"w-4 h-4 text-gray-500 inline-block"}),VSCode:(0,t.jsx)(g,{className:"w-4 h-4 text-gray-500 inline-block"})};function Z(e){let{withLabel:s=!1,cluster:r,status:a,onOpenSSHModal:l,onOpenVSCodeModal:n}=e,o=W(a),c=(0,v.X)(),d=e=>{switch(e){case"connect":K(r,l);break;case"VSCode":q(r,n);break;default:return}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"flex items-center space-x-4",children:Object.entries(D).map(e=>{let r,a,[l,n]=e;switch(l){case"connect":r="Connect",a="Connect with SSH";break;case"VSCode":r="VSCode",a="Open in VS Code"}return(s||(r=""),o.includes(l))?(0,t.jsx)(i.WH,{content:a,className:"capitalize text-sm text-muted-foreground",children:(0,t.jsxs)("button",{onClick:()=>d(l),className:"text-sky-blue hover:text-sky-blue-bright font-medium inline-flex items-center",children:[n,!c&&(0,t.jsx)("span",{className:"ml-1.5",children:r})]})},l):(0,t.jsx)(i.WH,{content:a,className:"capitalize text-sm text-muted-foreground",children:(0,t.jsxs)("span",{className:"opacity-30 flex items-center cursor-not-allowed text-sm",title:l,children:[n,!c&&(0,t.jsx)("span",{className:"ml-1.5",children:r})]})},l)})})})}let F=e=>{let{propertyList:s=[],valueList:r,setFilters:l,updateURLParams:n,placeholder:i="Filter clusters",filters:o=[]}=e,c=(0,a.useRef)(null),d=(0,a.useRef)(null),[u,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(""),[m,f]=(0,a.useState)("status"),[j,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&c.current&&!c.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,a.useEffect)(()=>{let e=[],s=m||"";if(s.length>1){s=m[0].toUpperCase();for(let e=1;e<m.length;e++)s+=m[e]}let t=o.filter(e=>e.property===s).map(e=>e.value);if(r&&"object"==typeof r)switch(m){case"status":e=r.status.filter(e=>!t.find(s=>s===e))||[];break;case"user":e=r.user.filter(e=>!t.find(s=>s===e))||[];break;case"cluster":e=r.cluster.filter(e=>!t.find(s=>s===e))||[];break;case"workspace":e=r.workspace.filter(e=>!t.find(s=>s===e))||[];break;case"infra":e=r.infra.filter(e=>!t.find(s=>s===e))||[];break;case"labels":e=r.labels.filter(e=>!t.find(s=>s===e))||[]}""!==p.trim()&&(e=e.filter(e=>e&&e.toString().toLowerCase().includes(p.toLowerCase()))),y(e)},[m,r,p,o]);let g=e=>{let r=s.find(s=>s.value===e);return r?r.label:e},w=e=>{l(s=>{let r=[...s,{property:g(m),operator:":",value:e}];return n(r),r}),h(!1),x(""),c.current.focus()};return(0,t.jsxs)("div",{className:"flex flex-row border border-gray-300 rounded-md overflow-visible",children:[(0,t.jsx)("div",{className:"border-r border-gray-300 flex-shrink-0",children:(0,t.jsxs)(C.Ph,{onValueChange:f,value:m,children:[(0,t.jsx)(C.i4,{"aria-label":"Filter Property",className:"focus:ring-0 focus:ring-offset-0 border-none rounded-l-md rounded-r-none w-20 sm:w-24 md:w-32 h-8 text-xs sm:text-sm",children:(0,t.jsx)(C.ki,{placeholder:"Status"})}),(0,t.jsx)(C.Bw,{children:s.map((e,s)=>(0,t.jsx)(C.Ql,{value:e.value,children:e.label},"property-item-".concat(s)))})]})}),(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{type:"text",ref:c,placeholder:i,value:p,onChange:e=>{x(e.target.value),u||h(!0)},onFocus:()=>{h(!0)},onKeyDown:e=>{"Enter"===e.key&&""!==p.trim()?(l(e=>{let s=[...e,{property:g(m),operator:":",value:p}];return n(s),s}),x(""),h(!1)):"Escape"===e.key&&(h(!1),c.current.blur())},className:"h-8 w-full sm:w-96 px-3 pr-8 text-sm border-none rounded-l-none rounded-r-md focus:ring-0 focus:outline-none",autoComplete:"off"}),p&&(0,t.jsx)("button",{onClick:()=>{x(""),h(!1)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",title:"Clear filter",tabIndex:-1,children:(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u&&j.length>0&&(0,t.jsx)("div",{ref:d,className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-60 overflow-y-auto",style:{zIndex:9999},children:j.map((e,s)=>(0,t.jsx)("div",{className:"px-3 py-2 cursor-pointer hover:bg-gray-50 text-sm ".concat(s!==j.length-1?"border-b border-gray-100":""),onClick:()=>w(e),children:(0,t.jsx)("span",{className:"text-sm text-gray-700",children:e})},"".concat(e,"-").concat(s)))})]})]})},V=e=>{let{filters:s=[],setFilters:r,updateURLParams:a}=e,l=e=>{r(s=>{let r=s.filter((s,r)=>r!==e);return a(r),r})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"flex items-center gap-4 py-2 px-2",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-content gap-2",children:[s.map((e,s)=>(0,t.jsx)(A,{filter:e,onRemove:()=>l(s)},"filteritem-".concat(s))),s.length>0&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("button",{onClick:()=>{a([]),r([])},className:"rounded-full px-4 py-1 text-sm text-gray-700 bg-gray-200 hover:bg-gray-300",children:"Clear filters"})})]})})})},A=e=>{let{filter:s,onRemove:r}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex items-center text-blue-600 bg-blue-100 px-1 py-1 rounded-full text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 px-2",children:[(0,t.jsx)("span",{children:"".concat(s.property," ")}),(0,t.jsx)("span",{children:"".concat(s.operator," ")}),(0,t.jsx)("span",{children:" ".concat(s.value)})]}),(0,t.jsx)("button",{onClick:()=>r(),className:"p-0.5 ml-1 transform text-gray-400 hover:text-gray-600 bg-blue-500 hover:bg-blue-600 rounded-full flex flex-col items-center",title:"Clear filter",children:(0,t.jsx)("svg",{className:"h-3 w-3",fill:"none",stroke:"white",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:5,d:"M6 18L18 6M6 6l12 12"})})})]})})}},12003:function(e,s,r){r.d(s,{j:function(){return n}});var t=r(90512);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=t.W,n=(e,s)=>r=>{var t;if((null==s?void 0:s.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:i}=s,o=Object.keys(n).map(e=>{let s=null==r?void 0:r[e],t=null==i?void 0:i[e];if(null===s)return null;let l=a(s)||a(t);return n[e][l]}),c=r&&Object.entries(r).reduce((e,s)=>{let[r,t]=s;return void 0===t||(e[r]=t),e},{});return l(e,o,null==s?void 0:null===(t=s.compoundVariants)||void 0===t?void 0:t.reduce((e,s)=>{let{class:r,className:t,...a}=s;return Object.entries(a).every(e=>{let[s,r]=e;return Array.isArray(r)?r.includes({...i,...c}[s]):({...i,...c})[s]===r})?[...e,r,t]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}}]);