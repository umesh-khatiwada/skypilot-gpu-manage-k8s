"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9224],{68969:function(e,t,a){a.d(t,{Ce:function(){return _},NJ:function(){return f},UA:function(){return p},_5:function(){return u},aT:function(){return d},getManagedJobs:function(){return h},jh:function(){return b},vs:function(){return g}});var o=a(67294),r=a(15821),n=a(93225),s=a(6378);a(97335);var l=a(47145),i=a(10410);let c=["job_id","_job_id","job_name","user_name","user_hash","workspace","submitted_at","job_duration","status","resources","cloud","region","accelerators","cluster_resources","cluster_resources_full","recovery_count","pool","pool_hash","details","failure_reason","user_yaml","entrypoint","is_job_group","execution","is_primary_in_job_group","links"];function u(e){if(!e||0===e.length)return null;let t=e.filter(e=>null===e.is_primary_in_job_group||void 0===e.is_primary_in_job_group||!0===e.is_primary_in_job_group);for(let a of t.length>0?t:e)if("SUCCEEDED"!==a.status)return a.status;return"SUCCEEDED"}async function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;let{allUsers:a=!0,skipFinished:o=!1,allFields:r=!1,nameMatch:u,userMatch:h,workspaceMatch:d,poolMatch:g,page:p,limit:f,statuses:_,fields:b,jobIDs:m}=e,y={all_users:a,verbose:!0,skip_finished:o};void 0!==u&&(y.name_match=u),void 0!==h&&(y.user_match=h),void 0!==d&&(y.workspace_match=d),void 0!==g&&(y.pool_match=g),void 0!==p&&(y.page=p),void 0!==f&&(y.limit=f),void 0!==_&&_.length>0&&(y.statuses=_),void 0!==m&&m.length>0&&(y.job_ids=m),r||(b&&b.length>0?y.fields=b:y.fields=c);let w=await l.x.post("/jobs/queue/v2",y);if(!w.ok){let e="Failed to get managed jobs with status ".concat(w.status);throw Error(e)}let C=w.headers.get("X-Skypilot-Request-ID");if(!C)throw Error("No request ID received from server for managed jobs");let v=await l.x.get("/api/get?request_id=".concat(C)),j=v.statusText;if(500===v.status)try{let e=await v.json();if(e.detail&&e.detail.error)try{let t=JSON.parse(e.detail.error);if(t.type&&t.type===n.iW)return{jobs:[],total:0,controllerStopped:!0};j=t.message||String(e.detail.error)}catch(t){console.error("Error parsing JSON from data.detail.error:",t),j=String(e.detail.error)}}catch(e){console.error("Error parsing response JSON:",e),j=String(e)}if(!v.ok){let e="API request to get managed jobs result failed with status ".concat(v.status,", error: ").concat(j);throw Error(e)}let k=await v.json(),S=k.return_value?JSON.parse(k.return_value):[],P=Array.isArray(S)?S:(null==S?void 0:S.jobs)||[],E=Array.isArray(S)?P.length:null!==(t=null==S?void 0:S.total)&&void 0!==t?t:P.length,D=(null==S?void 0:S.total_no_filter)||E,N=(null==S?void 0:S.status_counts)||{},M=P.map(e=>{var t;let a=0;e.end_at&&e.submitted_at?a=e.end_at-e.submitted_at:e.submitted_at&&(a=Date.now()/1e3-e.submitted_at);let o=[];e.submitted_at&&o.push({type:"PENDING",timestamp:e.submitted_at}),e.start_at&&o.push({type:"RUNNING",timestamp:e.start_at}),e.end_at&&o.push({type:e.status,timestamp:e.end_at});let r="",n="",s="",l="",i="";try{if(r=e.cloud||"",s=e.cluster_resources,n=e.region||"","-"===n&&(n=""),r&&(l=r,n&&(l+=" (".concat(n,")"))),i=l,e.accelerators){let t=Object.entries(e.accelerators).map(e=>{let[t,a]=e;return"".concat(a,"x").concat(t)}).join(", ");t&&(i+=" (".concat(t,")"))}}catch(t){s=e.cluster_resources}return{id:e.job_id,task_job_id:e._job_id,task:e.task_name,name:e.job_name,job_duration:e.job_duration,total_duration:a,workspace:e.workspace,status:e.status,requested_resources:e.resources,resources_str:s,resources_str_full:e.cluster_resources_full||s,cloud:r,region:e.region,infra:l,full_infra:i,recoveries:e.recovery_count,details:e.details||e.failure_reason,user:e.user_name,user_hash:e.user_hash,submitted_at:e.submitted_at?new Date(1e3*e.submitted_at):null,events:o,dag_yaml:e.user_yaml,entrypoint:e.entrypoint,git_commit:(null===(t=e.metadata)||void 0===t?void 0:t.git_commit)||"-",links:e.links||{},pool:e.pool,pool_hash:e.pool_hash,current_cluster_name:e.current_cluster_name,cluster_name_on_cloud:e.cluster_name_on_cloud,job_id_on_pool_cluster:e.job_id_on_pool_cluster,accelerators:e.accelerators,labels:e.labels||{},is_job_group:e.is_job_group,execution:e.execution,is_primary_in_job_group:e.is_primary_in_job_group}});return{jobs:await (0,i.M)(M,"jobs",{dashboardCache:s.ZP,rawData:P}),total:E,totalNoFilter:D,controllerStopped:!1,statusCounts:N}}catch(e){throw console.error("Error fetching managed job data:",e),e}}async function d(e){let{allUsers:t=!0,nameMatch:a,userMatch:o,workspaceMatch:r,poolMatch:n,page:s=1,limit:l=10,jobIDs:i,fields:c,allFields:u=!1,useClientPagination:d=!0}=e||{};try{if(!d)return await h(e);let g=await h({allUsers:t,nameMatch:a,userMatch:o,workspaceMatch:r,poolMatch:n,jobIDs:i,fields:c,allFields:u});if(g.controllerStopped||!g.jobs)return g;let p=g.jobs,f=p.length,_=(s-1)*l;return{jobs:p.slice(_,_+l),total:f,controllerStopped:!1}}catch(e){throw console.error("Error fetching managed job data with client pagination:",e),e}}async function g(){try{let e=await l.x.post("/jobs/pool_status",{pool_names:null});if(!e.ok){let t="Initial API request to get pool status failed with status ".concat(e.status);throw Error(t)}let t=e.headers.get("X-Skypilot-Request-ID");if(!t)throw Error("No request ID received from server for getting pool status");let a=await l.x.get("/api/get?request_id=".concat(t)),o=a.statusText;if(500===a.status)try{let e=await a.json();if(e.detail&&e.detail.error)try{let t=JSON.parse(e.detail.error);if(t.type&&t.type===n.iW)return{pools:[],controllerStopped:!0};o=t.message||String(e.detail.error)}catch(t){console.error("Error parsing JSON from data.detail.error:",t),o=String(e.detail.error)}}catch(e){console.error("Error parsing response JSON:",e),o=String(e)}if(!a.ok){let e="API request to get pool status result failed with status ".concat(a.status,", error: ").concat(o);throw Error(e)}let r=await a.json(),i=r.return_value?JSON.parse(r.return_value):[],c={jobs:[]};try{let e=await s.ZP.get(h,[{allUsers:!0,skipFinished:!0,fields:["pool","status"]}]);e.controllerStopped||(c=e)}catch(e){console.warn("Failed to fetch jobs for pool job counts:",e)}let u={},d=["SUCCEEDED","FAILED","FAILED_SETUP","FAILED_PRECHECKS","FAILED_NO_RESOURCE","FAILED_CONTROLLER","CANCELLED"];return c.jobs&&Array.isArray(c.jobs)&&c.jobs.forEach(e=>{let t=e.pool,a=e.status;t&&!d.includes(a)&&(u[t]||(u[t]={}),u[t][a]=(u[t][a]||0)+1)}),{pools:i.map(e=>({...e,jobCounts:u[e.name]||{}})),controllerStopped:!1}}catch(e){throw console.error("Error fetching pools:",e),e}}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[a,r]=(0,o.useState)(null),[n,l]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async function(){if(e)try{var t;l(!0);let a=await s.ZP.get(h,[{allUsers:!0,allFields:!0,jobIDs:[e]}]),o=(null==a?void 0:null===(t=a.jobs)||void 0===t?void 0:t.filter(t=>String(t.id)===String(e)))||[];o.length>0?r({jobs:o,controllerStopped:a.controllerStopped||!1}):r({jobs:[],controllerStopped:a.controllerStopped||!1})}catch(e){console.error("Error fetching single managed job data:",e),r({jobs:[],controllerStopped:!1})}finally{l(!1)}})()},[e,t]),{jobData:a,loading:n}}async function f(e){let t,{jobId:a,task:o=null,controller:n=!1,signal:s,onNewLog:i}=e,c=Date.now(),u=new Promise(e=>{let a=()=>{let o=Date.now()-c;o>=3e4?e({timeout:!0}):t=setTimeout(a,3e4-o)};t=setTimeout(a,3e4)}),h=(async()=>{try{let e=(await l.x.fetchImmediate("/jobs/logs",{controller:n,follow:!1,job_id:a,tail:5e3,task:o},"POST",{signal:s})).body.getReader();try{for(;;){let{done:t,value:a}=await e.read();if(t)break;c=Date.now();let o=new TextDecoder().decode(a);i(o)}}finally{if(!s||!s.aborted)try{e.cancel()}catch(e){"AbortError"!==e.name&&console.warn("Error canceling reader:",e)}t&&clearTimeout(t)}return{timeout:!1}}catch(e){if(t&&clearTimeout(t),"AbortError"===e.name)return{timeout:!1};throw e}})(),d=await Promise.race([h,u]);if(t&&clearTimeout(t),d.timeout){(0,r.C)("Log request for job ".concat(a," timed out after ").concat(30,"s of inactivity"),"warning");return}}async function _(e,t,a){let o="",s="",i="",c={};if("restartcontroller"===e)o="Restarting",s="restarted",i="jobs/queue/v2",c={all_users:!0,refresh:!0,skip_finished:!0,fields:["status"]},t="controller";else throw Error("Invalid action: ".concat(e));(0,r.C)("".concat(o," job ").concat(t,"..."),"info");try{try{let e=await l.x.fetchImmediate("/".concat(i),c);if(!e.ok){console.error("Initial API request ".concat(i," failed with status ").concat(e.status)),(0,r.C)("".concat(o," job ").concat(t," failed with status ").concat(e.status,"."),"error");return}let u=e.headers.get("X-Skypilot-Request-ID");if(!u){console.error("No request ID received from server for ".concat(i)),(0,r.C)("".concat(o," job ").concat(t," failed with no request ID."),"error");return}let h=await l.x.fetchImmediate("/api/get?request_id=".concat(u),void 0,"GET");if(200===h.status)(0,r.C)("Job ".concat(t," ").concat(s," successfully."),"success");else if(500===h.status)try{let e=await h.json();if(e.detail&&e.detail.error)try{let s=JSON.parse(e.detail.error);s.type&&s.type===n.Bo?(0,r.C)("".concat(o," job ").concat(t," is not supported!"),"error",1e4):s.type&&s.type===n.mF?(0,r.C)("Cluster ".concat(a," does not exist."),"error"):s.type&&s.type===n.iW?(0,r.C)("Cluster ".concat(a," is not up."),"error"):(0,r.C)("".concat(o," job ").concat(t," failed: ").concat(s.type),"error")}catch(a){(0,r.C)("".concat(o," job ").concat(t," failed: ").concat(e.detail.error),"error")}else(0,r.C)("".concat(o," job ").concat(t," failed with no details."),"error")}catch(e){(0,r.C)("".concat(o," job ").concat(t," failed with parse error."),"error")}else(0,r.C)("".concat(o," job ").concat(t," failed with status ").concat(h.status,"."),"error")}catch(e){console.error("Fetch error:",e),(0,r.C)("Network error ".concat(o," job ").concat(t,": ").concat(e.message),"error")}}catch(e){console.error("Error in handleStop:",e),(0,r.C)("Critical error ".concat(o," job ").concat(t,": ").concat(e.message),"error")}}async function b(e){let{jobId:t=null,name:a=null,controller:o=!1}=e;try{let e=await l.x.fetch("/jobs/download_logs",{job_id:t,name:a,controller:o,refresh:!1}),n=Object.values(e||{});if(!n.length){(0,r.C)("No logs found to download.","warning");return}let s=await l.x.fetchImmediate("/download?relative=items",{folder_paths:n});if(!s.ok){let e=await s.text();throw Error("Download failed: ".concat(s.status," ").concat(e))}let i=await s.blob(),c=window.URL.createObjectURL(i),u=document.createElement("a"),h=new Date().toISOString().replace(/[:.]/g,"-"),d=t?"job-".concat(t):a?"job-".concat(a):"job";u.href=c,u.download="managed-".concat(d,"-").concat(o?"controller-logs":"logs","-").concat(h,".zip"),document.body.appendChild(u),u.click(),u.remove(),window.URL.revokeObjectURL(c)}catch(e){console.error("Error downloading managed job logs:",e),(0,r.C)("Error downloading managed job logs: ".concat(e.message),"error")}}},15821:function(e,t,a){a.d(t,{C:function(){return o}});function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,o=document.getElementById("toast-container");o||((o=document.createElement("div")).id="toast-container",o.className="fixed top-0 right-0 p-4 z-[9999] flex flex-col items-end space-y-2",document.body.appendChild(o));let r=document.createElement("div");switch(r.className="rounded-md border-l-4 p-4 shadow-md flex items-center justify-between max-w-md w-full mb-2 pointer-events-auto",t){case"success":r.className+=" bg-green-100 border-green-500 text-green-800";break;case"error":r.className+=" bg-red-100 border-red-500 text-red-800";break;case"warning":r.className+=" bg-yellow-100 border-yellow-500 text-yellow-800";break;default:r.className+=" bg-blue-100 border-blue-500 text-blue-800"}return r.innerHTML='\n      <div class="flex-1 mr-2">\n        <p class="text-sm font-medium">'.concat(e,'</p>\n      </div>\n      <button class="text-gray-500 hover:text-gray-700 focus:outline-none" aria-label="Close toast">\n        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n          <line x1="18" y1="6" x2="6" y2="18"></line>\n          <line x1="6" y1="6" x2="18" y2="18"></line>\n        </svg>\n      </button>\n    '),o.appendChild(r),r.querySelector("button").addEventListener("click",()=>{o.removeChild(r)}),setTimeout(()=>{o.contains(r)&&o.removeChild(r)},a),r}},97335:function(e,t,a){var o=a(6378),r=a(68969);function n(){return"function"==typeof window.__skyJobsPaginationFetch}class s{_generateCacheKey(e){let{page:t=1,limit:a=10,sortBy:o="submitted_at",sortOrder:r="desc",allUsers:n=!0,nameMatch:s,userMatch:l,workspaceMatch:i,poolMatch:c,statuses:u}=e;return JSON.stringify({page:t,limit:a,sortBy:o,sortOrder:r,allUsers:n,nameMatch:s||null,userMatch:l||null,workspaceMatch:i||null,poolMatch:c||null,statuses:u&&u.length>0?[...u].sort():null})}_generateFilterKey(e){let{allUsers:t=!0,nameMatch:a,userMatch:o,workspaceMatch:r,poolMatch:n,statuses:s}=e;return JSON.stringify({allUsers:t,nameMatch:a||null,userMatch:o||null,workspaceMatch:r||null,poolMatch:n||null,statuses:s&&s.length>0?[...s].sort():null})}_isCacheValid(e){return!!e&&Date.now()-e.timestamp<this.cacheTTL}_groupTasksByJob(e){let t=new Map,a=[];for(let o of e){let e=o.id;t.has(e)||(t.set(e,[]),a.push(e)),t.get(e).push(o)}return{jobMap:t,jobOrder:a}}async _populateCacheDefaultPathSinglePage(e){let{page:t=1,limit:a=10,sortBy:n,sortOrder:s,...l}=e,i=this._generateCacheKey(e);console.log("[JobsCacheManager] Default path: fetching single page",t);let c=await o.ZP.get(r.getManagedJobs,[{...l,page:t,limit:a}]);if(c.__skipCache)return c;if(c.controllerStopped)return{jobs:[],total:0,totalNoFilter:0,totalPages:0,hasNext:!1,hasPrev:!1,controllerStopped:!0,statusCounts:{}};let u=c.jobs||[],h="number"==typeof c.total?c.total:u.length,d=c.totalNoFilter||h,g=Math.ceil(h/a)||1,p=t<g,f=t>1,_=c.statusCounts||{};return this.pageCache.set(i,{jobs:u,total:h,totalNoFilter:d,totalPages:g,hasNext:p,hasPrev:f,controllerStopped:!1,statusCounts:_,timestamp:Date.now()}),{jobs:u,total:h,totalNoFilter:d,totalPages:g,hasNext:p,hasPrev:f,controllerStopped:!1,statusCounts:_,fromCache:!1,cacheStatus:"default_path_single_page"}}async _loadFullDatasetAndCacheAllPages(e){let{page:t=1,limit:a=10,sortBy:n,sortOrder:s,...l}=e,i=this._generateFilterKey(l);console.log("[JobsCacheManager] Background: fetching full dataset");let c=await o.ZP.get(r.getManagedJobs,[l]);if(c.__skipCache||c.controllerStopped)return;let u=c.jobs||[],{jobMap:h,jobOrder:d}=this._groupTasksByJob(u),g=d.length;this.fullDataCache.set(i,{jobs:u,jobMap:h,jobOrder:d,totalJobs:g,totalNoFilter:c.totalNoFilter||g,statusCounts:c.statusCounts||{},timestamp:Date.now()});let p=Math.ceil(g/a)||1;for(let e=1;e<=p;e++){let t=(e-1)*a,o=t+a,r=d.slice(t,o),i=[];for(let e of r)i.push(...h.get(e));let u=this._generateCacheKey({...l,page:e,limit:a,sortBy:n,sortOrder:s});this.pageCache.set(u,{jobs:i,total:g,totalNoFilter:c.totalNoFilter||g,totalPages:p,hasNext:e<p,hasPrev:e>1,controllerStopped:!1,statusCounts:c.statusCounts||{},timestamp:Date.now()})}console.log("[JobsCacheManager] Background: cached",p,"pages")}async _populateCachePluginPath(e){let{page:t=1,limit:a=10,sortBy:o="submitted_at",sortOrder:r="desc",statuses:n,...s}=e,l=this._generateCacheKey(e);console.log("[JobsCacheManager] Plugin path: fetching page",t);let i=window.__skyJobsPaginationFetch;if(!i)throw Error("Plugin fetch function not available");let c=await i({page:t,limit:a,sortBy:o,sortOrder:r,statuses:n,filters:this._convertFiltersToPluginFormat(s)});if(c.controllerStopped)return{jobs:[],total:0,totalNoFilter:0,totalPages:0,hasNext:!1,hasPrev:!1,controllerStopped:!0,statusCounts:{},fromCache:!1,cacheStatus:"plugin_path_controller_stopped"};let u=c.items||c.data||[],h=c.total||0,d=c.totalNoFilter||h,g=c.totalPages||c.total_pages||Math.ceil(h/a)||1,p=c.hasNext||c.has_next||t<g,f=c.hasPrev||c.has_prev||t>1,_=c.statusCounts||{};return this.pageCache.set(l,{jobs:u,total:h,totalNoFilter:d,totalPages:g,hasNext:p,hasPrev:f,controllerStopped:!1,statusCounts:_,timestamp:Date.now()}),{jobs:u,total:h,totalNoFilter:d,totalPages:g,hasNext:p,hasPrev:f,controllerStopped:!1,statusCounts:_,fromCache:!1,cacheStatus:"plugin_path_fetched"}}_convertFiltersToPluginFormat(e){let t=[];return e.nameMatch&&t.push({property:"name",value:e.nameMatch}),e.userMatch&&t.push({property:"user",value:e.userMatch}),e.workspaceMatch&&t.push({property:"workspace",value:e.workspaceMatch}),e.poolMatch&&t.push({property:"pool",value:e.poolMatch}),t}async getPaginatedJobs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:t=1,limit:a=10}=e,o=this._generateCacheKey(e),r=this._generateFilterKey(e);console.log("[JobsCacheManager] getPaginatedJobs called:",{page:t,limit:a,cacheKey:o.substring(0,50)+"..."});try{let a;let s=this.pageCache.get(o);if(s&&this._isCacheValid(s))return console.log("[JobsCacheManager] Cache hit for page",t),{jobs:s.jobs,total:s.total,totalNoFilter:s.totalNoFilter,totalPages:s.totalPages,hasNext:s.hasNext,hasPrev:s.hasPrev,controllerStopped:s.controllerStopped,statusCounts:s.statusCounts,fromCache:!0,cacheStatus:"cache_hit"};if(this.pendingRequests.has(o))return console.log("[JobsCacheManager] Waiting for pending request"),await this.pendingRequests.get(o);a=n()?this._populateCachePluginPath(e):this._populateCacheDefaultPathSinglePage(e),this.pendingRequests.set(o,a);try{let t=await a;return n()||this.backgroundPrefetching.has(r)||this._kickOffBackgroundPrefetch(e,r),t}finally{this.pendingRequests.delete(o)}}catch(e){throw console.error("[JobsCacheManager] Error in getPaginatedJobs:",e),e}}_kickOffBackgroundPrefetch(e,t){console.log("[JobsCacheManager] Kicking off background prefetch");let a=this._loadFullDatasetAndCacheAllPages(e).catch(e=>{console.warn("[JobsCacheManager] Background prefetch failed:",e)}).finally(()=>{this.backgroundPrefetching.delete(t)});this.backgroundPrefetching.set(t,a)}async prefetchNextPage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{page:t=1,limit:a=10}=e,o=t+1,r={...e,page:o},s=this._generateCacheKey(r);if(!(this.pageCache.has(s)||this.pendingRequests.has(s))){console.log("[JobsCacheManager] Prefetching page",o);try{n()&&await this._populateCachePluginPath(r)}catch(e){console.warn("[JobsCacheManager] Prefetch failed:",e)}}}isDataLoading(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._generateCacheKey(e);return this.pendingRequests.has(t)}isDataCached(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._generateCacheKey(e),a=this.pageCache.get(t);return a&&this._isCacheValid(a)}getCacheStatus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._generateCacheKey(e),a=this.pageCache.get(t);if(!a)return{isCached:!1,isFresh:!1,age:0};let o=Date.now()-a.timestamp;return{isCached:!0,isFresh:o<this.cacheTTL,age:o,maxAge:this.cacheTTL}}invalidateCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){let t=this._generateCacheKey(e);this.pageCache.delete(t);let a=this._generateFilterKey(e);this.fullDataCache.delete(a),this.backgroundPrefetching.delete(a)}else this.pageCache.clear(),this.fullDataCache.clear(),this.pendingRequests.clear(),this.backgroundPrefetching.clear();o.ZP.invalidateFunction(r.getManagedJobs)}invalidateFilteredPages(e){let t=this._generateFilterKey(e);for(let[e]of this.pageCache.entries())try{let a=JSON.parse(e),o={allUsers:a.allUsers,nameMatch:a.nameMatch,userMatch:a.userMatch,workspaceMatch:a.workspaceMatch,poolMatch:a.poolMatch,statuses:a.statuses};JSON.stringify(o)===t&&this.pageCache.delete(e)}catch(e){}this.fullDataCache.delete(t)}getCacheStats(){return{pageCacheSize:this.pageCache.size,fullDataCacheSize:this.fullDataCache.size,pendingRequestsCount:this.pendingRequests.size,backgroundPrefetchingCount:this.backgroundPrefetching.size,isPluginAvailable:n(),cachedKeys:Array.from(this.pageCache.keys()).map(e=>{try{let t=JSON.parse(e);return"page:".concat(t.page,",limit:").concat(t.limit)}catch(t){return e.substring(0,30)}})}}constructor(){this.pageCache=new Map,this.fullDataCache=new Map,this.pendingRequests=new Map,this.backgroundPrefetching=new Map,this.cacheTTL=12e4}}let l=new s;t.Z=l},10410:function(e,t,a){a.d(t,{M:function(){return n}});var o=a(23800),r=a(6378);async function n(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,o.A_)(t);if(0===n.length)return e;let s={dashboardCache:a.dashboardCache||r.ZP,getOriginalData:()=>Promise.resolve(e),rawData:a.rawData||null,...a},l=e;for(let e of n){let t=l;try{let a=await e.enhance(t,s);if(!Array.isArray(a)){console.error("[Plugin] Data enhancement ".concat(e.id," did not return an array. Skipping."));continue}a.length!==t.length&&console.warn("[Plugin] Data enhancement ".concat(e.id," changed array length from ").concat(t.length," to ").concat(a.length,". This is not recommended.")),l=a}catch(t){console.error("[Plugin] Data enhancement ".concat(e.id," failed:"),t)}}return l}}}]);